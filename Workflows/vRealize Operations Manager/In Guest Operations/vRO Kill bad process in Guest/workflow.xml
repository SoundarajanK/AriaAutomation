<?xml version='1.0' encoding='UTF-8'?>
<workflow xmlns="http://vmware.com/vco/workflow" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://vmware.com/vco/workflow http://vmware.com/vco/workflow/Workflow-v4.xsd" root-name="item4" object-name="workflow:name=generic" id="bcef0594-2a9d-4878-bf08-baf2c9791728" version="0.0.9" api-version="6.0.0" allowed-operations="evf" restartMode="1" resumeFromFailedMode="0">
  <display-name><![CDATA[vRO Kill bad process in Guest]]></display-name>
  <description><![CDATA[This workflow updates the number of vCPUs on a virtual machine. When running this workflow, if the virtual machine is powered on then CPU Hot Add must be enabled on the target virtual machine.]]></description>
  <position y="0.0" x="65.0"/>
  <input>
    <param name="targetId" type="string">
      <description><![CDATA[The Uuid of the VM to modify]]></description>
    </param>
    <param name="correlationId" type="string">
      <description><![CDATA[The correlationId for the workflow used for logging purposes. ]]></description>
    </param>
    <param name="targetvCenteruuid" type="string">
      <description><![CDATA[UUID of the vCenter where the target VM resides]]></description>
    </param>
    <param name="vmUsername" type="string">
      <description><![CDATA[Username for the virtual machine]]></description>
    </param>
    <param name="vmPassword" type="SecureString">
      <description><![CDATA[Password for the virtual machine]]></description>
    </param>
    <param name="badProcName" type="string"/>
  </input>
  <output>
    <param name="STATUS" type="string"/>
  </output>
  <attrib name="status" type="boolean" read-only="false">
    <value encoded="n"><![CDATA[false]]></value>
  </attrib>
  <attrib name="eventOut" type="string" read-only="false">
    <value encoded="n"><![CDATA[]]></value>
  </attrib>
  <attrib name="eventDetails" type="string" read-only="false">
    <value encoded="n"><![CDATA[]]></value>
  </attrib>
  <attrib name="targetVmName" type="string" read-only="false">
    <value encoded="n"><![CDATA[]]></value>
  </attrib>
  <attrib name="targetVM" type="VC:VirtualMachine" read-only="false">
    <value encoded="n"><![CDATA[__NULL__]]></value>
  </attrib>
  <attrib name="severity" type="string" read-only="false">
    <value encoded="n"><![CDATA[]]></value>
  </attrib>
  <attrib name="targetVcenterConnection" type="VC:SdkConnection" read-only="false">
    <value encoded="n"><![CDATA[__NULL__]]></value>
  </attrib>
  <workflow-note x="40.0" y="0.0" w="860.0" h="147.0" color="a1d7a1ff">
    <description><![CDATA[Validation and Common Starting Tasks]]></description>
  </workflow-note>
  <workflow-item name="item1" out-name="item2" type="link" linked-workflow-id="ec1a8692-4711-4b73-8de4-e342131a6cb7">
    <display-name><![CDATA[ValidateTarget]]></display-name>
    <in-binding>
      <bind name="targetId" type="string" export-name="targetId"/>
      <bind name="correlationId" type="string" export-name="correlationId"/>
    </in-binding>
    <out-binding>
      <bind name="status" type="boolean" export-name="status"/>
      <bind name="eventOut" type="string" export-name="eventOut"/>
      <bind name="eventDetails" type="string" export-name="eventDetails"/>
    </out-binding>
    <position y="9.954545454545453" x="264.5"/>
  </workflow-item>
  <workflow-item name="item2" out-name="item16" type="condition" alt-out-name="item19" comparator="0">
    <display-name><![CDATA[Valid Target Id]]></display-name>
    <script encoded="false"><![CDATA[//Generated by the system, cannot be edited
return (status == true) ;]]></script>
    <in-binding>
      <bind name="status" type="boolean" export-name="status"/>
    </in-binding>
    <condition name="status" type="boolean" comparator="0" label="null">false</condition>
    <position y="0.0" x="385.0"/>
  </workflow-item>
  <workflow-item name="item5" out-name="item7" type="condition" alt-out-name="item0" comparator="0">
    <display-name><![CDATA[Target VM Found]]></display-name>
    <script encoded="false"><![CDATA[//Generated by the system, cannot be edited
return (status == true) ;]]></script>
    <in-binding>
      <bind name="status" type="boolean" export-name="status"/>
    </in-binding>
    <condition name="status" type="boolean" comparator="0" label="null">false</condition>
    <position y="0.45454545454545325" x="784.5"/>
  </workflow-item>
  <workflow-item name="item18" out-name="item3" type="link" linked-workflow-id="161f7106-481b-453b-9e10-cc29acd42fef">
    <display-name><![CDATA[EventRecorder]]></display-name>
    <in-binding>
      <bind name="event" type="string" export-name="eventOut"/>
      <bind name="eventDetails" type="string" export-name="eventDetails"/>
      <bind name="CorrelationId" type="string" export-name="correlationId"/>
      <bind name="targetVMName" type="string" export-name="targetVmName"/>
      <bind name="severity" type="string" export-name="severity"/>
    </in-binding>
    <out-binding/>
    <position y="64.5" x="664.5"/>
  </workflow-item>
  <workflow-item name="item24" out-name="item30" type="link" linked-workflow-id="161f7106-481b-453b-9e10-cc29acd42fef">
    <display-name><![CDATA[EventRecorder]]></display-name>
    <in-binding>
      <bind name="event" type="string" export-name="eventOut"/>
      <bind name="eventDetails" type="string" export-name="eventDetails"/>
      <bind name="CorrelationId" type="string" export-name="correlationId"/>
      <bind name="targetVMName" type="string" export-name="targetVmName"/>
      <bind name="severity" type="string" export-name="severity"/>
    </in-binding>
    <out-binding/>
    <position y="155.4090909090909" x="1364.5"/>
  </workflow-item>
  <workflow-item name="item12" out-name="item5" type="link" linked-workflow-id="6ff24a3a-d83e-47fd-9661-cdfbed7b7c22">
    <display-name><![CDATA[Find VM by MOID]]></display-name>
    <in-binding>
      <bind name="targetId" type="string" export-name="targetId"/>
      <bind name="CorrelationId" type="string" export-name="correlationId"/>
      <bind name="targetvCenteruuid" type="string" export-name="targetvCenteruuid">
        <description><![CDATA[UUID of the vCenter where the target VM is located]]></description>
      </bind>
    </in-binding>
    <out-binding>
      <bind name="statusOut" type="boolean" explicitly-not-bound="true"/>
      <bind name="targetVM" type="VC:VirtualMachine" export-name="targetVM"/>
      <bind name="targetVmName" type="string" export-name="targetVmName"/>
    </out-binding>
    <position y="9.954545454545453" x="664.5"/>
  </workflow-item>
  <workflow-item name="item4" out-name="item1" type="task">
    <display-name><![CDATA[Status Running]]></display-name>
    <script encoded="false"><![CDATA[STATUS = "Running";]]></script>
    <in-binding/>
    <out-binding>
      <bind name="STATUS" type="string" export-name="STATUS"/>
    </out-binding>
    <position y="9.954545454545453" x="145.0"/>
  </workflow-item>
  <workflow-item name="item19" out-name="item18" type="task">
    <display-name><![CDATA[Status Failed]]></display-name>
    <script encoded="false"><![CDATA[STATUS = "Failed";
eventOut = "Validate Target";
eventDetails = "Not a valid UUID";
severity = "error";]]></script>
    <in-binding/>
    <out-binding>
      <bind name="STATUS" type="string" export-name="STATUS"/>
      <bind name="severity" type="string" export-name="severity"/>
      <bind name="eventOut" type="string" export-name="eventOut"/>
      <bind name="eventDetails" type="string" export-name="eventDetails"/>
    </out-binding>
    <position y="64.5" x="385.0"/>
  </workflow-item>
  <workflow-item name="item3" type="end" end-mode="0">
    <position y="109.04545454545453" x="704.5"/>
  </workflow-item>
  <workflow-item name="item21" out-name="item24" type="task">
    <display-name><![CDATA[Status Success]]></display-name>
    <script encoded="false"><![CDATA[STATUS = "Success";
eventOut = "Process Complete";
eventDetails = "Process killed successfully";
severity = "info";
]]></script>
    <in-binding/>
    <out-binding>
      <bind name="STATUS" type="string" export-name="STATUS"/>
      <bind name="eventOut" type="string" export-name="eventOut"/>
      <bind name="eventDetails" type="string" export-name="eventDetails"/>
      <bind name="severity" type="string" export-name="severity"/>
    </out-binding>
    <position y="155.4090909090909" x="944.5"/>
  </workflow-item>
  <workflow-item name="item30" type="end" end-mode="0">
    <position y="145.4090909090909" x="1564.5"/>
  </workflow-item>
  <workflow-item name="item0" out-name="item18" type="task">
    <display-name><![CDATA[Status Failed]]></display-name>
    <script encoded="false"><![CDATA[STATUS = "Failed";
eventOut = "Find VM by MOID";
eventDetails = "Could not find VM by MOID";
severity = "error";]]></script>
    <in-binding/>
    <out-binding>
      <bind name="STATUS" type="string" export-name="STATUS"/>
      <bind name="eventOut" type="string" export-name="eventOut"/>
      <bind name="eventDetails" type="string" export-name="eventDetails"/>
      <bind name="severity" type="string" export-name="severity"/>
    </out-binding>
    <position y="64.5" x="784.5"/>
  </workflow-item>
  <workflow-item name="item14" out-name="item24" type="task">
    <display-name><![CDATA[Status Failed]]></display-name>
    <script encoded="false"><![CDATA[STATUS = "failed";
eventOut = "Kill Guest Process Failed";
eventDetails = "Invalid Process name or permissions failed.";
severity = "error";]]></script>
    <in-binding/>
    <out-binding>
      <bind name="STATUS" type="string" export-name="STATUS"/>
      <bind name="eventOut" type="string" export-name="eventOut"/>
      <bind name="eventDetails" type="string" export-name="eventDetails"/>
      <bind name="severity" type="string" export-name="severity"/>
    </out-binding>
    <position y="82.68181818181817" x="1144.5"/>
  </workflow-item>
  <workflow-item name="item16" out-name="item12" type="link" linked-workflow-id="12e3b318-41ad-4e7a-9ac9-2ef703e81d4f">
    <display-name><![CDATA[Get vCenter Connection by UUID]]></display-name>
    <in-binding>
      <bind name="targetVcenterUuid" type="string" export-name="targetvCenteruuid"/>
    </in-binding>
    <out-binding>
      <bind name="targetVcenterConnection" type="VC:SdkConnection" export-name="targetVcenterConnection"/>
    </out-binding>
    <position y="9.954545454545453" x="524.5"/>
  </workflow-item>
  <workflow-item name="item7" out-name="item21" catch-name="item14" throw-bind-name="STATUS" type="link" linked-workflow-id="8e1ca527-f0a9-4c13-950c-3efa87f5acde">
    <display-name><![CDATA[Get processes from guest - kill bad  processes]]></display-name>
    <in-binding>
      <bind name="vmUsername" type="string" export-name="vmUsername">
        <description><![CDATA[Username for the virtual machine]]></description>
      </bind>
      <bind name="vmPassword" type="SecureString" export-name="vmPassword">
        <description><![CDATA[Password for the virtual machine]]></description>
      </bind>
      <bind name="badProcName" type="string" export-name="badProcName"/>
      <bind name="vm" type="VC:VirtualMachine" export-name="targetVM">
        <description><![CDATA[Virtual machine]]></description>
      </bind>
    </in-binding>
    <out-binding>
      <bind name="result" type="Array/CompositeType(pid:number,name:string,owner:string,cmdLine:string,startTime:Date,endTime:Date,exitCode:number):GuestProcessInfoType" explicitly-not-bound="true" export-name="NULL">
        <description><![CDATA[The list running processes.]]></description>
      </bind>
    </out-binding>
    <description><![CDATA[List the processes running in the guest operating system, plus those started by this API that have recently completed]]></description>
    <position y="9.954545454545453" x="945.0"/>
  </workflow-item>
  <presentation>
    <p-param name="correlationId">
      <desc><![CDATA[correlationId]]></desc>
      <p-qual kind="static" name="mandatory" type="boolean"><![CDATA[false]]></p-qual>
    </p-param>
    <p-param name="targetId">
      <desc><![CDATA[targetId]]></desc>
    </p-param>
    <p-param name="targetvCenteruuid">
      <desc><![CDATA[UUID of the vCenter where the target VM is located]]></desc>
    </p-param>
    <p-param name="vmUsername">
      <desc><![CDATA[Username for the virtual machine]]></desc>
    </p-param>
    <p-param name="vmPassword">
      <desc><![CDATA[Password for the virtual machine]]></desc>
    </p-param>
    <p-param name="badProcName">
      <desc><![CDATA[badProcName]]></desc>
    </p-param>
  </presentation>
</workflow>