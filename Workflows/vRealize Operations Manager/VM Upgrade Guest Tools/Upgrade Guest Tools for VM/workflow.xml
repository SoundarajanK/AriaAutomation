<?xml version='1.0' encoding='UTF-8'?>
<workflow xmlns="http://vmware.com/vco/workflow" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://vmware.com/vco/workflow http://vmware.com/vco/workflow/Workflow-v4.xsd" root-name="item2" object-name="workflow:name=generic" id="485dcba3-58ce-40a3-9149-9bcf0ca42cae" version="0.0.14" api-version="6.0.0" allowed-operations="evf" restartMode="1" resumeFromFailedMode="0">
  <display-name><![CDATA[Upgrade Guest Tools for VM]]></display-name>
  <description><![CDATA[Places the given host in Maintenance Mode then removes it from vCenter.]]></description>
  <position y="0.0" x="25.0"/>
  <input>
    <param name="targetvCenteruuid" type="string"/>
    <param name="targetId" type="string"/>
    <param name="correlationId" type="string"/>
    <param name="updateNextReboot" type="boolean">
      <description><![CDATA[Should the tools be upgraded at the next VM reboot?]]></description>
    </param>
  </input>
  <output>
    <param name="STATUS" type="string">
      <description><![CDATA[Workflow Status]]></description>
    </param>
  </output>
  <attrib name="errorCode" type="string" read-only="false">
    <value encoded="n"><![CDATA[]]></value>
    <description><![CDATA[Exception thrown by workflow element]]></description>
  </attrib>
  <attrib name="eventOut" type="string" read-only="false">
    <value encoded="n"><![CDATA[]]></value>
    <description><![CDATA[Event that occurred]]></description>
  </attrib>
  <attrib name="eventDetails" type="string" read-only="false">
    <value encoded="n"><![CDATA[]]></value>
    <description><![CDATA[Details of the Event]]></description>
  </attrib>
  <attrib name="severity" type="string" read-only="false">
    <value encoded="n"><![CDATA[]]></value>
    <description><![CDATA[Severity of the event]]></description>
  </attrib>
  <attrib name="targetVMName" type="string" read-only="false">
    <value encoded="n"><![CDATA[]]></value>
  </attrib>
  <workflow-item name="item1" out-name="item7" catch-name="item4" throw-bind-name="errorCode" type="link" linked-workflow-id="9a244950-39ce-4703-b88f-0107969da1d1">
    <display-name><![CDATA[vRO Upgrade Tools on Next Reboot]]></display-name>
    <in-binding>
      <bind name="targetvCenteruuid" type="string" export-name="targetvCenteruuid"/>
      <bind name="targetId" type="string" export-name="targetId"/>
      <bind name="correlationId" type="string" export-name="correlationId"/>
    </in-binding>
    <out-binding>
      <bind name="STATUS" type="string" export-name="STATUS"/>
    </out-binding>
    <description><![CDATA[Removes a host from vCenter.]]></description>
    <position y="9.954545454545453" x="524.5"/>
  </workflow-item>
  <workflow-item name="item4" out-name="item6" type="task">
    <display-name><![CDATA[Set Severity Level]]></display-name>
    <script encoded="false"><![CDATA[STATUS = "Failed";
eventOut = "vRO Upgrade Guest Tools";
eventDetails = "Failed to upgrade Guest Tools.";
severity = "error";]]></script>
    <in-binding>
      <bind name="errorCode" type="string" export-name="errorCode"/>
    </in-binding>
    <out-binding>
      <bind name="errorCode" type="string" export-name="errorCode"/>
      <bind name="eventDetails" type="string" export-name="eventDetails"/>
      <bind name="eventOut" type="string" export-name="eventOut"/>
      <bind name="severity" type="string" export-name="severity"/>
      <bind name="STATUS" type="string" export-name="STATUS"/>
    </out-binding>
    <position y="137.22727272727272" x="824.5"/>
  </workflow-item>
  <workflow-item name="item5" type="end" end-mode="0">
    <position y="190.86363636363635" x="864.5"/>
  </workflow-item>
  <workflow-item name="item6" out-name="item5" type="link" linked-workflow-id="161f7106-481b-453b-9e10-cc29acd42fef">
    <display-name><![CDATA[EventRecorder]]></display-name>
    <in-binding>
      <bind name="event" type="string" export-name="eventOut"/>
      <bind name="eventDetails" type="string" export-name="eventDetails"/>
      <bind name="CorrelationId" type="string" export-name="correlationId"/>
      <bind name="targetVMName" type="string" export-name="targetVMName"/>
      <bind name="severity" type="string" export-name="severity"/>
    </in-binding>
    <out-binding/>
    <position y="200.86363636363635" x="684.5"/>
  </workflow-item>
  <workflow-item name="item2" out-name="item1" type="condition" alt-out-name="item10" comparator="0">
    <display-name><![CDATA[Upgrade Next Reboot?]]></display-name>
    <script encoded="false"><![CDATA[//Generated by the system, cannot be edited
return (updateNextReboot == true) ;]]></script>
    <in-binding>
      <bind name="updateNextReboot" type="boolean" export-name="updateNextReboot"/>
    </in-binding>
    <condition name="updateNextReboot" type="boolean" comparator="0" label="null">false</condition>
    <position y="0.45454545454545325" x="384.5"/>
  </workflow-item>
  <workflow-item name="item9" out-name="item6" type="task">
    <display-name><![CDATA[Set Severity Level]]></display-name>
    <script encoded="false"><![CDATA[STATUS = "Success";
eventOut = "vRO Upgrade Guest Tools";
eventDetails = "VMTools are up to date";
severity = "info";]]></script>
    <in-binding>
      <bind name="errorCode" type="string" export-name="errorCode"/>
    </in-binding>
    <out-binding>
      <bind name="errorCode" type="string" export-name="errorCode"/>
      <bind name="eventDetails" type="string" export-name="eventDetails"/>
      <bind name="eventOut" type="string" export-name="eventOut"/>
      <bind name="severity" type="string" export-name="severity"/>
      <bind name="STATUS" type="string" export-name="STATUS"/>
    </out-binding>
    <position y="137.22727272727272" x="684.5"/>
  </workflow-item>
  <workflow-item name="item10" out-name="item7" throw-bind-name="errorCode" type="link" linked-workflow-id="75153aa9-e5af-4de3-b079-2841c773bb7e">
    <display-name><![CDATA[vRO Upgrade Tools]]></display-name>
    <in-binding>
      <bind name="correlationId" type="string" export-name="correlationId"/>
      <bind name="targetId" type="string" export-name="targetId"/>
      <bind name="targetvCenteruuid" type="string" export-name="targetvCenteruuid"/>
    </in-binding>
    <out-binding>
      <bind name="STATUS" type="string" export-name="STATUS"/>
    </out-binding>
    <description><![CDATA[Removes a host from vCenter.]]></description>
    <position y="137.22727272727272" x="384.5"/>
  </workflow-item>
  <workflow-item name="item7" out-name="item11" type="condition" alt-out-name="item9" comparator="0">
    <display-name><![CDATA[Decision]]></display-name>
    <script encoded="false"><![CDATA[//Generated by the system, cannot be edited
return (STATUS == "Failed") ;]]></script>
    <in-binding>
      <bind name="STATUS" type="string" export-name="STATUS"/>
    </in-binding>
    <condition name="STATUS" type="string" comparator="0" label="null">Failed</condition>
    <position y="127.22727272727272" x="524.5"/>
  </workflow-item>
  <workflow-item name="item11" out-name="item6" type="task">
    <display-name><![CDATA[Set Severity Level]]></display-name>
    <script encoded="false"><![CDATA[STATUS = "Failed";
eventOut = "vRO Upgrade Guest Tools";
eventDetails = "Failed to upgrade Guest Tools.";
severity = "error";]]></script>
    <in-binding>
      <bind name="errorCode" type="string" export-name="errorCode"/>
    </in-binding>
    <out-binding>
      <bind name="eventDetails" type="string" export-name="eventDetails"/>
      <bind name="severity" type="string" export-name="severity"/>
      <bind name="STATUS" type="string" export-name="STATUS"/>
    </out-binding>
    <position y="200.86363636363635" x="524.5"/>
  </workflow-item>
  <presentation>
    <p-param name="targetvCenteruuid">
      <desc><![CDATA[targetvCenteruuid]]></desc>
    </p-param>
    <p-param name="targetId">
      <desc><![CDATA[targetId]]></desc>
    </p-param>
    <p-param name="correlationId">
      <desc><![CDATA[correlationId]]></desc>
    </p-param>
    <p-param name="updateNextReboot">
      <desc><![CDATA[Should the tools be upgraded at the next VM reboot?]]></desc>
    </p-param>
  </presentation>
</workflow>